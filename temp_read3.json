{
  "g:/ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–/works/works2/é–‹ç™ºç³»/hanashitara/src/app/page.tsx": "import ReportForm from '@/components/ReportForm';\nimport Link from 'next/link';\n\nexport default function Home() {\n  return (\n    <div className=\"min-h-screen bg-gray-50/50 pt-10 pb-20 px-4\">\n      <div className=\"max-w-3xl mx-auto space-y-8\">\n        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¨ãƒªã‚¢ */}\n        <header className=\"text-center space-y-4\">\n          <div>\n            <h1 className=\"text-3xl font-extrabold text-[#1c1c1e] tracking-tight mb-2\">ãƒãƒŠã‚·ã‚¿ãƒ©.com</h1>\n            <p className=\"text-sm text-gray-500 font-medium\">ã‚¹ã‚¿ãƒƒãƒ•å°‚ç”¨ãƒãƒ¼ã‚¿ãƒ«</p>\n          </div>\n          <div className=\"flex justify-center\">\n            <Link\n              href=\"/mypage\"\n              className=\"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-full border border-gray-200 shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 hover:text-gray-900 transition-colors\"\n            >\n              ğŸ“„ è‡ªåˆ†ã®çµ¦ä¸ãƒ»æ˜ç´°ã‚’ç¢ºèªã™ã‚‹\n            </Link>\n          </div>\n        </header>\n\n        {/* æ¥­å‹™å ±å‘Šã‚¨ãƒªã‚¢ */}\n        <main className=\"space-y-6\">\n          <ReportForm />\n        </main>\n\n        <footer className=\"text-center pt-8 border-t border-gray-200/60 text-xs text-gray-400\">\n          <p>Â© 2026 ãƒãƒŠã‚·ã‚¿ãƒ©.com All Rights Reserved.</p>\n        </footer>\n      </div>\n    </div>\n  );\n}\n",
  "g:/ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–/works/works2/é–‹ç™ºç³»/hanashitara/src/app/admin/page.tsx": "'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\n// â‘ å–å¾—ãƒ‡ãƒ¼ã‚¿ã®å‹å®šç¾©\r\ninterface ReportData {\r\n    id: string; // GASã§ç”Ÿæˆã—ãŸUUID\r\n    date: string;\r\n    staff: string;\r\n    customerName: string;\r\n    customerPhone: string;\r\n    services: string;\r\n    totalSales: number;\r\n    staffShare: number;\r\n    isPaid: boolean;\r\n    daysPending: number; // æœªå…¥é‡‘æ—¥æ•°ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§è¨ˆç®—ï¼‰\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n    const [reports, setReports] = useState<ReportData[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [errorText, setErrorText] = useState('');\r\n\r\n    // ã‚¿ãƒ–çŠ¶æ…‹ç®¡ç†\r\n    const [activeTab, setActiveTab] = useState<'sales' | 'staff' | 'deposit'>('sales');\r\n    // å‰æ‰•ã„ãƒ‡ãƒã‚¸ãƒƒãƒˆçŠ¶æ…‹\r\n    const [deposits, setDeposits] = useState<Record<string, number>>({});\r\n\r\n    type CustomerSortOption = 'deposit' | 'paid_desc' | 'registered_asc' | 'registered_desc' | 'name_asc' | 'number_asc';\r\n    const [customerSortBy, setCustomerSortBy] = useState<CustomerSortOption>('deposit');\r\n\r\n    // ã‚³ãƒ”ãƒ¼å®Œäº†ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºç”¨\r\n    const [copiedId, setCopiedId] = useState<string | null>(null);\r\n\r\n    // ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆä¿æŒç”¨\r\n    const [blacklistedPhones, setBlacklistedPhones] = useState<string[]>([]);\r\n\r\n    const GAS_URL = 'https://script.google.com/macros/s/AKfycbzopMne7Ga8ZruWAf3xvAP7WQFvQ-Uau09qsmG2K6-Mcs7xfrXXl1Ev4GmLHpOcgTwj/exec';\r\n\r\n    // â‘¡åˆå›èª­ã¿è¾¼ã¿æ™‚ã«å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹\r\n    useEffect(() => {\r\n        fetchReports();\r\n        fetchBlacklist();\r\n        fetchDeposits();\r\n    }, []);\r\n\r\n    const fetchDeposits = async () => {\r\n        try {\r\n            const res = await fetch(`${GAS_URL}?action=getDeposits`);\r\n            const json = await res.json();\r\n            if (json.success) {\r\n                setDeposits(json.deposits || {});\r\n            }\r\n        } catch (err) {\r\n            console.error('ãƒ‡ãƒã‚¸ãƒƒãƒˆå–å¾—ã‚¨ãƒ©ãƒ¼:', err);\r\n        }\r\n    };\r\n\r\n    const fetchBlacklist = async () => {\r\n        try {\r\n            const res = await fetch(`${GAS_URL}?action=getBlacklistPhones`);\r\n            const json = await res.json();\r\n            if (json.success) {\r\n                setBlacklistedPhones(json.phones || []);\r\n            }\r\n        } catch (err) {\r\n            console.error('ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆå–å¾—ã‚¨ãƒ©ãƒ¼:', err);\r\n        }\r\n    };\r\n\r\n    const fetchReports = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            // GASã® doGet å´ã‚’å©ã (action=getReports)\r\n            const res = await fetch(`${GAS_URL}?action=getReports`);\r\n            const json = await res.json();\r\n\r\n            if (json.success) {\r\n                // å–å¾—ã—ãŸäºŒæ¬¡å…ƒé…åˆ—ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã«æ•´å½¢ï¼‹æ—¥æ•°ã®è¨ˆç®—\r\n                const today = new Date();\r\n                const formattedData: ReportData[] = json.data.map((row: any[]) => {\r\n                    // A:ID(0), B:æ—¥ä»˜(1), C:ã‚¹ã‚¿ãƒƒãƒ•(2), D:é¡§å®¢é›»è©±(3), E:é¡§å®¢å(4), \r\n                    // F:æä¾›ã‚µãƒ¼ãƒ“ã‚¹(5), G:ç·å£²ä¸Š(6), H:ã‚¹ã‚¿ãƒƒãƒ•å ±é…¬(7), I:å…¥é‡‘æ¸ˆ(8)\r\n\r\n                    // æœªå…¥é‡‘æ—¥æ•°ã®è¨ˆç®—\r\n                    let days = 0;\r\n                    const isPaidStatus = row[8] === 'å…¥é‡‘æ¸ˆ' || row[8] === true || row[8] === 'TRUE';\r\n                    if (!isPaidStatus && row[1]) {\r\n                        const reportDate = new Date(row[1]);\r\n                        const diffTime = Math.abs(today.getTime() - reportDate.getTime());\r\n                        days = Math.floor(diffTime / (1000 * 60 * 60 * 24));\r\n                    }\r\n\r\n                    return {\r\n                        id: row[0],\r\n                        date: row[1],\r\n                        staff: row[2],\r\n                        customerPhone: row[3],\r\n                        customerName: row[4],\r\n                        services: row[5],\r\n                        totalSales: Number(row[6]) || 0,\r\n                        staffShare: Number(row[7]) || 0,\r\n                        isPaid: isPaidStatus,\r\n                        daysPending: days\r\n                    };\r\n                });\r\n\r\n                // æ—¥ä»˜ã®æ–°ã—ã„é †ã«ä¸¦ã³æ›¿ãˆï¼ˆé™é †ï¼‰\r\n                formattedData.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n                setReports(formattedData);\r\n            } else {\r\n                setErrorText('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + json.message);\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n            setErrorText('é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const togglePaidStatus = async (id: string, currentPaid: boolean) => {\r\n        const newPaidStatus = !currentPaid;\r\n        // ç”»é¢ä¸Šã®è¦‹ãŸç›®ã‚’å³åº§ã«åˆ‡ã‚Šæ›¿ãˆã‚‹\r\n        setReports(reports.map(r => r.id === id ? { ...r, isPaid: newPaidStatus } : r));\r\n\r\n        try {\r\n            // GASã¸é€šä¿¡ã—ã¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’æ›´æ–°\r\n            await fetch(GAS_URL, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'text/plain' },\r\n                body: JSON.stringify({\r\n                    action: 'updatePaidStatus',\r\n                    id: id,\r\n                    isPaid: newPaidStatus\r\n                }),\r\n            });\r\n        } catch (error) {\r\n            console.error('æ›´æ–°ã‚¨ãƒ©ãƒ¼:', error);\r\n            alert('é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å…ƒã®çŠ¶æ…‹ã«æˆ»ã‚Šã¾ã™ã€‚');\r\n            // ã‚¨ãƒ©ãƒ¼æ™‚ã¯ç”»é¢ã‚’å…ƒã«æˆ»ã™\r\n            setReports(reports.map(r => r.id === id ? { ...r, isPaid: currentPaid } : r));\r\n        }\r\n    };\r\n\r\n    const handleAddBlacklist = async (phone: string, name: string) => {\r\n        const reason = window.prompt(`${name}ã•ã‚“ (${phone}) ã‚’ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆã«ç™»éŒ²ã™ã‚‹ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆã‚¤ã‚¿ã‚ºãƒ©ã€æœªæ‰•ã„ç­‰ï¼‰`);\r\n        if (!reason) return; // ã‚­ãƒ£ãƒ³ã‚»ãƒ«\r\n\r\n        // å³åº§ã«UIã¸åæ˜ \r\n        setBlacklistedPhones(prev => [...prev, phone]);\r\n\r\n        try {\r\n            await fetch(GAS_URL, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'text/plain' },\r\n                body: JSON.stringify({ action: 'addBlacklist', phone, name, reason }),\r\n            });\r\n            alert('ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆã«ç™»éŒ²ã—ã¾ã—ãŸã€‚');\r\n        } catch (err) {\r\n            console.error('ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆç™»éŒ²ã‚¨ãƒ©ãƒ¼:', err);\r\n            alert('é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ç½®ã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');\r\n            // ã‚¨ãƒ©ãƒ¼æ™‚ã¯å…ƒã«æˆ»ã™\r\n            setBlacklistedPhones(prev => prev.filter(p => p !== phone));\r\n        }\r\n    };\r\n\r\n    // ç£ä¿ƒæ–‡ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹é–¢æ•°\r\n    const handleCopyRemind = (report: ReportData) => {\r\n        const text = `${report.customerName} æ§˜\r\n        \r\nã„ã¤ã‚‚ãƒãƒŠã‚·ã‚¿ãƒ©.comã‚’ã”åˆ©ç”¨ã„ãŸã ãã€èª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚\r\n${new Date(report.date).toLocaleDateString('ja-JP')} ã«ã”åˆ©ç”¨ã„ãŸã ãã¾ã—ãŸä¸‹è¨˜ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ãã¾ã—ã¦ã€ç¾åœ¨ã”å…¥é‡‘ã®ç¢ºèªãŒã¨ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚\r\n\r\nã€ã”åˆ©ç”¨å†…å®¹ã€‘: ${report.services}\r\nã€ã”è«‹æ±‚é‡‘é¡ã€‘: Â¥${report.totalSales.toLocaleString()}-\r\n\r\nãŠæ‰‹æ•°ã‚’ãŠã‹ã‘ã„ãŸã—ã¾ã™ãŒã€æŒ‡å®šã®å£åº§ã¾ã§ã”å…¥é‡‘ã‚’ãŠé¡˜ã„ç”³ã—ä¸Šã’ã¾ã™ã€‚\r\nè¡Œãé•ã„ã§æ—¢ã«ãŠæŒ¯è¾¼æ¸ˆã¿ã®å ´åˆã¯ã€ä½•å’ã”å®¹èµ¦ãã ã•ã„ã¾ã›ã€‚\r\n\r\nå¼•ãç¶šãã€ãƒãƒŠã‚·ã‚¿ãƒ©.comã‚’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚`;\r\n\r\n        navigator.clipboard.writeText(text).then(() => {\r\n            setCopiedId(report.id);\r\n            setTimeout(() => setCopiedId(null), 2000); // 2ç§’å¾Œã«ã€Œã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€ã®è¡¨ç¤ºã‚’æ¶ˆã™\r\n        }).catch(err => {\r\n            console.error('ã‚³ãƒ”ãƒ¼å¤±æ•—:', err);\r\n            alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');\r\n        });\r\n    };\r\n\r\n    // ---- ãƒ•ã‚§ãƒ¼ã‚º4: é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ ----\r\n    const currentYear = new Date().getFullYear();\r\n    const currentMonthStr = `${currentYear}-${String(new Date().getMonth() + 1).padStart(2, '0')}`;\r\n\r\n    // 1. å¹´é–“åˆè¨ˆï¼ˆå½“å¹´ï¼‰\r\n    const yearReports = reports.filter(r => new Date(r.date).getFullYear() === currentYear);\r\n    const totalYearSales = yearReports.reduce((sum, r) => sum + r.totalSales, 0);\r\n    const totalYearProfit = yearReports.reduce((sum, r) => sum + (r.totalSales - r.staffShare), 0);\r\n\r\n    // 2. ä»Šæœˆåˆ†åˆè¨ˆ\r\n    const monthReports = reports.filter(r => {\r\n        const d = new Date(r.date);\r\n        return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}` === currentMonthStr;\r\n    });\r\n    const totalMonthSales = monthReports.reduce((sum, r) => sum + r.totalSales, 0);\r\n    const totalMonthProfit = monthReports.reduce((sum, r) => sum + (r.totalSales - r.staffShare), 0);\r\n\r\n    // 3. å…¨ã¦ã®æœªå…¥é‡‘é¡\r\n    const totalUnpaid = reports.filter(r => !r.isPaid).reduce((sum, r) => sum + r.totalSales, 0);\r\n\r\n    // 4. ã‚¹ã‚¿ãƒƒãƒ•åˆ¥é›†è¨ˆï¼ˆä»Šæœˆï¼‰\r\n    const staffStatsMap = new Map<string, { sales: number, share: number }>();\r\n    monthReports.forEach(r => {\r\n        const current = staffStatsMap.get(r.staff) || { sales: 0, share: 0 };\r\n        staffStatsMap.set(r.staff, {\r\n            sales: current.sales + r.totalSales,\r\n            share: current.share + r.staffShare\r\n        });\r\n    });\r\n    const staffStats = Array.from(staffStatsMap.entries())\r\n        .map(([name, stats]) => ({ name, ...stats }))\r\n        .sort((a, b) => b.sales - a.sales);\r\n\r\n    // ãƒ•ã‚§ãƒ¼ã‚º5: ãŠå®¢æ§˜ä¸€è¦§ã®ç”Ÿæˆï¼ˆãƒ‡ãƒã‚¸ãƒƒãƒˆåˆ©ç”¨è€…å„ªå…ˆï¼‹ãã®ä»–ã®ã‚½ãƒ¼ãƒˆï¼‰\r\n    const customerMap = new Map<string, { totalPaid: number, registeredDate: string }>();\r\n    reports.forEach(r => {\r\n        if (r.customerName) {\r\n            const current = customerMap.get(r.customerName) || {\r\n                totalPaid: 0,\r\n                registeredDate: r.date\r\n            };\r\n            if (r.isPaid) {\r\n                current.totalPaid += r.totalSales;\r\n            }\r\n            if (new Date(r.date) < new Date(current.registeredDate)) {\r\n                current.registeredDate = r.date;\r\n            }\r\n            customerMap.set(r.customerName, current);\r\n        }\r\n    });\r\n\r\n    Object.keys(deposits).forEach(name => {\r\n        if (!customerMap.has(name)) {\r\n            customerMap.set(name, { totalPaid: 0, registeredDate: new Date().toISOString() });\r\n        }\r\n    });\r\n\r\n    // ç™»éŒ²æ—¥ãƒ™ãƒ¼ã‚¹ã§ãŠå®¢æ§˜ç•ªå·ï¼ˆé€£ç•ªï¼‰ã‚’å‰²ã‚Šå½“ã¦ã‚‹ãŸã‚ã«ä¸€æ™‚ã‚½ãƒ¼ãƒˆ\r\n    const allCustomers = Array.from(customerMap.entries())\r\n        .map(([name, data]) => ({ name, ...data }))\r\n        .sort((a, b) => new Date(a.registeredDate).getTime() - new Date(b.registeredDate).getTime());\r\n\r\n    const customerList = allCustomers.map((customer, index) => {\r\n        const balance = deposits[customer.name] || 0;\r\n        return {\r\n            name: customer.name,\r\n            balance,\r\n            totalPaid: customer.totalPaid,\r\n            registeredDate: customer.registeredDate,\r\n            customerNumber: index + 1\r\n        };\r\n    }).sort((a, b) => {\r\n        if (customerSortBy === 'deposit') {\r\n            if (a.balance > 0 && b.balance === 0) return -1;\r\n            if (a.balance === 0 && b.balance > 0) return 1;\r\n            if (a.totalPaid !== b.totalPaid) return b.totalPaid - a.totalPaid;\r\n            return a.name.localeCompare(b.name, 'ja');\r\n        }\r\n        if (customerSortBy === 'paid_desc') {\r\n            return b.totalPaid - a.totalPaid;\r\n        }\r\n        if (customerSortBy === 'registered_asc') {\r\n            return new Date(a.registeredDate).getTime() - new Date(b.registeredDate).getTime();\r\n        }\r\n        if (customerSortBy === 'registered_desc') {\r\n            return new Date(b.registeredDate).getTime() - new Date(a.registeredDate).getTime();\r\n        }\r\n        if (customerSortBy === 'number_asc') {\r\n            return a.customerNumber - b.customerNumber;\r\n        }\r\n        if (customerSortBy === 'name_asc') {\r\n            return a.name.localeCompare(b.name, 'ja');\r\n        }\r\n        return 0;\r\n    });\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-6xl mx-auto space-y-8 pb-32\">\r\n            <header className=\"flex flex-col md:flex-row justify-between items-start md:items-end border-b pb-4 gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900\">ã‚ªãƒ¼ãƒŠãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">å£²ä¸Šç®¡ç†ãƒ»ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†</p>\r\n                </div>\r\n            </header>\r\n\r\n            {/* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */}\r\n            <div className=\"flex gap-4 border-b border-gray-100 mb-6\">\r\n                <button\r\n                    onClick={() => setActiveTab('sales')}\r\n                    className={`pb-3 px-4 text-sm font-bold transition-colors border-b-2 ${activeTab === 'sales' ? 'border-gray-900 text-gray-900' : 'border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300'\r\n                        }`}\r\n                >\r\n                    ğŸ“Š å£²ä¸Šãƒ»å…¥é‡‘ç®¡ç†\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('staff')}\r\n                    className={`pb-3 px-4 text-sm font-bold transition-colors border-b-2 ${activeTab === 'staff' ? 'border-gray-900 text-gray-900' : 'border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300'\r\n                        }`}\r\n                >\r\n                    ğŸ‘¥ ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('deposit')}\r\n                    className={`pb-3 px-4 text-sm font-bold transition-colors border-b-2 ${activeTab === 'deposit' ? 'border-gray-900 text-gray-900' : 'border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300'\r\n                        }`}\r\n                >\r\n                    ğŸ’³ ãŠå®¢æ§˜ç®¡ç†\r\n                </button>\r\n            </div>\r\n\r\n            {activeTab === 'sales' && (\r\n                <>\r\n                    {/* é›†è¨ˆã‚µãƒãƒªãƒ¼è¡¨ç¤º (ãƒ•ã‚§ãƒ¼ã‚º4) */}\r\n                    <section className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                        {/* ç·åˆã‚µãƒãƒªãƒ¼ */}\r\n                        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col gap-4\">\r\n                            <h2 className=\"font-bold text-gray-800 border-b border-gray-100 pb-2\">ã‚µãƒãƒªãƒ¼ ({currentMonthStr.replace('-', 'å¹´')}æœˆ)</h2>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <p className=\"text-xs text-gray-500 mb-1 font-medium\">ä»Šæœˆã®ç·å£²ä¸Š</p>\r\n                                    <p className=\"text-xl font-bold text-gray-900\">Â¥{totalMonthSales.toLocaleString()}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs text-blue-600 mb-1 font-bold\">âœ¨ ã‚ªãƒ¼ãƒŠãƒ¼åˆ©ç›Š</p>\r\n                                    <p className=\"text-xl font-bold text-blue-600\">Â¥{totalMonthProfit.toLocaleString()}</p>\r\n                                </div>\r\n                                <div className=\"pt-2 border-t border-gray-100 col-span-2\">\r\n                                    <p className=\"text-xs text-gray-500 mb-1 font-medium\">ç¾åœ¨ã®æœªå…¥é‡‘ç·é¡</p>\r\n                                    <p className=\"text-lg font-bold text-red-500\">Â¥{totalUnpaid.toLocaleString()}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* å¹´é–“ã‚µãƒãƒªãƒ¼ */}\r\n                        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col gap-4 relative overflow-hidden\">\r\n                            <div className=\"absolute top-0 right-0 p-4 opacity-5 text-6xl\">ğŸ“ˆ</div>\r\n                            <h2 className=\"font-bold border-b border-gray-100 pb-2 text-gray-800\">ç¢ºå®šç”³å‘Šç”¨ ({currentYear}å¹´ ç´¯è¨ˆ)</h2>\r\n                            <div className=\"flex-1 flex flex-col justify-center gap-4 relative z-10\">\r\n                                <div>\r\n                                    <p className=\"text-xs text-gray-500 mb-1 font-medium\">å¹´é–“ ç·å£²ä¸Š</p>\r\n                                    <p className=\"text-2xl font-bold text-gray-900\">Â¥{totalYearSales.toLocaleString()}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs text-blue-600 mb-1 font-bold\">å¹´é–“ ã‚ªãƒ¼ãƒŠãƒ¼ç´”åˆ©ç›Š</p>\r\n                                    <p className=\"text-xl font-bold text-blue-600\">Â¥{totalYearProfit.toLocaleString()}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* ã‚¹ã‚¿ãƒƒãƒ•åˆ¥å®Ÿç¸¾ï¼ˆä»Šæœˆï¼‰ */}\r\n                        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col h-full max-h-[250px] overflow-hidden\">\r\n                            <h2 className=\"font-bold text-gray-800 border-b border-gray-100 pb-2 mb-3\">ã‚¹ã‚¿ãƒƒãƒ•åˆ¥å®Ÿç¸¾ ({currentMonthStr.replace('-', 'å¹´')}æœˆ)</h2>\r\n                            <div className=\"overflow-y-auto pr-2 space-y-3\">\r\n                                {staffStats.length === 0 ? (\r\n                                    <p className=\"text-sm text-gray-400 text-center py-4\">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>\r\n                                ) : (\r\n                                    <ul className=\"space-y-3\">\r\n                                        {staffStats.map(s => (\r\n                                            <li key={s.name} className=\"flex justify-between items-center text-sm border-b border-gray-50 pb-2 last:border-0\">\r\n                                                <span className=\"font-semibold text-gray-700\">{s.name}</span>\r\n                                                <div className=\"text-right\">\r\n                                                    <p className=\"text-gray-900 font-medium\">å£²ä¸Š: Â¥{s.sales.toLocaleString()}</p>\r\n                                                    <p className=\"text-[11px] text-gray-400 mt-0.5\">å ±é…¬: Â¥{s.share.toLocaleString()}</p>\r\n                                                </div>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* å ±å‘Šãƒ‡ãƒ¼ã‚¿ä¸€è¦§ãƒ»å…¥é‡‘ãƒã‚§ãƒƒã‚¯ */}\r\n                    <section className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                        <div className=\"px-6 py-4 border-b flex justify-between items-center bg-gray-50/50\">\r\n                            <h2 className=\"font-semibold text-gray-800\">æœ€æ–°ã®æ¥­å‹™å ±å‘Š / å…¥é‡‘ç¢ºèª</h2>\r\n                        </div>\r\n                        <div className=\"overflow-x-auto relative\">\r\n\r\n                            {/* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã¨ã‚¨ãƒ©ãƒ¼è¡¨ç¤º */}\r\n                            {isLoading && (\r\n                                <div className=\"absolute inset-0 bg-white/70 flex justify-center items-center z-10 backdrop-blur-sm\">\r\n                                    <span className=\"text-gray-500 font-medium animate-pulse\">ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...</span>\r\n                                </div>\r\n                            )}\r\n                            {errorText && (\r\n                                <div className=\"p-4 bg-red-50 text-red-600 text-sm border-b font-medium\">\r\n                                    {errorText}\r\n                                </div>\r\n                            )}\r\n\r\n                            <table className=\"w-full text-sm text-left\">\r\n                                <thead className=\"bg-gray-50 text-gray-600 border-b\">\r\n                                    <tr>\r\n                                        <th className=\"px-6 py-3 font-medium\">æ—¥ä»˜</th>\r\n                                        <th className=\"px-6 py-3 font-medium\">ã‚¹ã‚¿ãƒƒãƒ•</th>\r\n                                        <th className=\"px-6 py-3 font-medium\">ãŠå®¢æ§˜å (é›»è©±) / ã‚µãƒ¼ãƒ“ã‚¹</th>\r\n                                        <th className=\"px-6 py-3 font-medium text-right\">å£²ä¸Šé¡</th>\r\n                                        <th className=\"px-6 py-3 font-medium text-right\">ã‚¹ã‚¿ãƒƒãƒ•å ±é…¬</th>\r\n                                        <th className=\"px-6 py-3 font-medium text-center\">å…¥é‡‘çŠ¶æ³</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-gray-100\">\r\n                                    {reports.length === 0 && !isLoading && !errorText && (\r\n                                        <tr>\r\n                                            <td colSpan={6} className=\"px-6 py-8 text-center text-gray-400\">\r\n                                                å ±å‘Šãƒ‡ãƒ¼ã‚¿ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“\r\n                                            </td>\r\n                                        </tr>\r\n                                    )}\r\n                                    {reports.map((report) => (\r\n                                        <tr key={report.id} className={`hover:bg-gray-50/50 transition-colors ${!report.isPaid && report.daysPending >= 3 ? 'bg-red-50/30' : ''}`}>\r\n                                            <td className=\"px-6 py-4 text-gray-600 whitespace-nowrap\">{new Date(report.date).toLocaleDateString('ja-JP')}</td>\r\n                                            <td className=\"px-6 py-4 font-medium text-gray-900\">{report.staff}</td>\r\n                                            <td className=\"px-6 py-4 text-gray-600\">\r\n                                                <div className=\"font-medium text-gray-800 flex items-center gap-2\">\r\n                                                    {report.customerName}\r\n                                                    {blacklistedPhones.includes(report.customerPhone) && (\r\n                                                        <span className=\"text-[10px] bg-red-100 text-red-700 px-1.5 py-0.5 rounded font-bold border border-red-200\">ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆå—è¨ºæ‹’å¦</span>\r\n                                                    )}\r\n                                                </div>\r\n                                                <div className=\"text-xs text-gray-400 mt-0.5 flex items-center gap-2\">\r\n                                                    {report.customerPhone}\r\n                                                    {!blacklistedPhones.includes(report.customerPhone) && (\r\n                                                        <button\r\n                                                            onClick={() => handleAddBlacklist(report.customerPhone, report.customerName)}\r\n                                                            className=\"text-[10px] text-gray-400 hover:text-red-500 underline transition-colors\"\r\n                                                        >\r\n                                                            ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆã«ç™»éŒ²\r\n                                                        </button>\r\n                                                    )}\r\n                                                </div>\r\n                                                <div className=\"text-[11px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded inline-block mt-1\">{report.services}</div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-right font-medium text-gray-900\">Â¥{report.totalSales.toLocaleString()}</td>\r\n                                            <td className=\"px-6 py-4 text-right text-gray-600\">Â¥{report.staffShare.toLocaleString()}</td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <div className=\"flex flex-col items-center gap-2\">\r\n                                                    <button\r\n                                                        onClick={() => togglePaidStatus(report.id, report.isPaid)}\r\n                                                        className={`px-4 py-1.5 rounded-full text-xs font-medium transition-colors border shadow-sm w-full max-w-[100px] ${report.isPaid\r\n                                                            ? 'bg-green-50 text-green-700 border-green-200 hover:bg-green-100'\r\n                                                            : 'bg-white text-gray-600 border-gray-300 hover:bg-gray-50'\r\n                                                            }`}\r\n                                                    >\r\n                                                        {report.isPaid ? 'âœ“ å…¥é‡‘æ¸ˆ' : 'æœªå…¥é‡‘'}\r\n                                                    </button>\r\n                                                    {!report.isPaid && (\r\n                                                        <div className=\"flex flex-col items-center gap-1.5 w-full\">\r\n                                                            {report.daysPending >= 3 && (\r\n                                                                <span className=\"text-[10px] text-red-600 font-bold bg-red-100 px-2 py-0.5 rounded w-full text-center\">3æ—¥çµŒé!</span>\r\n                                                            )}\r\n                                                            <button\r\n                                                                onClick={() => handleCopyRemind(report)}\r\n                                                                className={`text-[10px] w-full max-w-[100px] py-1 border rounded transition-colors flex justify-center items-center ${copiedId === report.id ? 'bg-green-50 text-green-600 border-green-200' : 'border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100'}`}\r\n                                                            >\r\n                                                                {copiedId === report.id ? 'âœ“ ã‚³ãƒ”ãƒ¼å®Œäº†' : 'ğŸ“ç£ä¿ƒã‚’ã‚³ãƒ”ãƒ¼'}\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </section>\r\n                </>\r\n            )}\r\n\r\n            {/* ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç† (æ–°è¦è¿½åŠ ãƒ»çµ¦ä¸æ˜ç´°ç­‰) */}\r\n            {activeTab === 'staff' && (\r\n                <section className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                    <div className=\"px-6 py-4 border-b flex justify-between items-center bg-gray-50/50\">\r\n                        <h2 className=\"font-semibold text-gray-800\">ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ã¨å ±é…¬ç®¡ç† ({currentMonthStr.replace('-', 'å¹´')}æœˆ)</h2>\r\n                        <button\r\n                            onClick={() => alert('ã€ãƒ‡ãƒ¢ã€‘æ–°è¦ã‚¹ã‚¿ãƒƒãƒ•è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã€ã‚¹ã‚¿ãƒƒãƒ•åã‚„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç­‰ã‚’ç™»éŒ²ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚')}\r\n                            className=\"text-xs bg-gray-900 text-white px-3 py-1.5 rounded font-bold hover:bg-gray-800 transition-colors shadow-sm\">\r\n                            â• æ–°è¦ã‚¹ã‚¿ãƒƒãƒ•è¿½åŠ \r\n                        </button>\r\n                    </div>\r\n                    <div className=\"overflow-x-auto relative p-6\">\r\n                        <table className=\"w-full text-sm text-left border rounded-lg overflow-hidden\">\r\n                            <thead className=\"bg-gray-50 text-gray-600 border-b\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 font-medium\">ã‚¹ã‚¿ãƒƒãƒ•å</th>\r\n                                    <th className=\"px-6 py-3 font-medium text-right\">ä»Šæœˆã®å ±é…¬é¡</th>\r\n                                    <th className=\"px-6 py-3 font-medium text-center\">æ“ä½œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-100\">\r\n                                {staffStats.length === 0 && (\r\n                                    <tr>\r\n                                        <td colSpan={3} className=\"px-6 py-8 text-center text-gray-400\">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td>\r\n                                    </tr>\r\n                                )}\r\n                                {staffStats.map((s) => {\r\n                                    return (\r\n                                        <tr key={s.name} className=\"hover:bg-gray-50/50 transition-colors\">\r\n                                            <td className=\"px-6 py-4 font-bold text-gray-900\">{s.name}</td>\r\n                                            <td className=\"px-6 py-4 text-right\">\r\n                                                <div className=\"font-medium text-gray-900\">Â¥{s.share.toLocaleString()}</div>\r\n                                                <div className=\"text-[10px] text-gray-400\">å£²ä¸Š: Â¥{s.sales.toLocaleString()}</div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <div className=\"flex flex-wrap items-center justify-center gap-2\">\r\n                                                    <button\r\n                                                        onClick={() => {\r\n                                                            alert(`ã€çµ¦ä¸æ˜ç´° (PDFä½œæˆãƒ‡ãƒ¢)ã€‘\\n\\nå¯¾è±¡: ${s.name} æ§˜\\nå¯¾è±¡æœˆ: ${currentMonthStr.replace('-', 'å¹´')}æœˆåˆ†\\n\\nãƒ»ä»Šæœˆå ±é…¬é¡: Â¥${s.share.toLocaleString()}\\n\\nâ†’ å®Ÿéš›ã¯ã“ã“ã§PDFãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé–‹ãã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚`);\r\n                                                        }}\r\n                                                        className=\"px-3 py-1.5 bg-white text-gray-700 border border-gray-300 rounded text-xs font-bold hover:bg-gray-50 transition-colors\">\r\n                                                        ğŸ“„ æ˜ç´°PDFä½œæˆ\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => {\r\n                                                            alert(`ã€è‡ªå‹•ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒ‡ãƒ¢ã€‘\\n\\nå®›å…ˆ: ${s.name} æ§˜\\nä»¶å: ${currentMonthStr.replace('-', 'å¹´')}æœˆåˆ† çµ¦ä¸æ˜ç´°ã®ãŠçŸ¥ã‚‰ã›\\n\\næœ¬æ–‡:\\nã„ã¤ã‚‚ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ãƒ‡ãƒ¢å®šå‹æ–‡ã§ã™ã€‚\\nä»Šæœˆã®æ˜ç´°ã‚’æ·»ä»˜ã„ãŸã—ã¾ã™...ï¼ˆé€ä¿¡å®Œäº†ï¼ï¼‰`);\r\n                                                        }}\r\n                                                        className=\"px-3 py-1.5 bg-blue-50 text-blue-600 border border-blue-200 rounded text-xs font-bold hover:bg-blue-100 transition-colors\">\r\n                                                        âœ‰ï¸ ãƒ¡ãƒ¼ãƒ«é€ä¿¡\r\n                                                    </button>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </section>\r\n            )}\r\n\r\n            {/* ãŠå®¢æ§˜ãƒ‡ãƒã‚¸ãƒƒãƒˆç®¡ç†ã‚¿ãƒ– (ãƒ•ã‚§ãƒ¼ã‚º5ç”¨ãƒ‡ãƒ¢) */}\r\n            {activeTab === 'deposit' && (\r\n                <section className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                    <div className=\"px-6 py-4 border-b flex flex-wrap justify-between items-center gap-4 bg-gray-50/50\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <h2 className=\"font-semibold text-gray-800\">ãŠå®¢æ§˜ç®¡ç† (å‰æ‰•ã„ãƒ‡ãƒã‚¸ãƒƒãƒˆå«ã‚€)</h2>\r\n                        </div>\r\n                        <div className=\"flex flex-wrap items-center gap-4\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <label className=\"text-sm text-gray-600 font-medium\">ä¸¦ã¹æ›¿ãˆ:</label>\r\n                                <select\r\n                                    value={customerSortBy}\r\n                                    onChange={(e) => setCustomerSortBy(e.target.value as CustomerSortOption)}\r\n                                    className=\"border border-gray-300 rounded px-3 py-1.5 text-sm bg-white focus:outline-none focus:border-indigo-500 font-medium\"\r\n                                >\r\n                                    <option value=\"deposit\">å‰æ‰•ã„æœ‰ã‚Š (ãŠå¾—æ„æ§˜é †)</option>\r\n                                    <option value=\"paid_desc\">ç´¯è¨ˆæ”¯æ‰•é¡ãŒå¤šã„é †</option>\r\n                                    <option value=\"registered_asc\">ç™»éŒ²æ—¥ãŒå¤ã„é †</option>\r\n                                    <option value=\"registered_desc\">ç™»éŒ²æ—¥ãŒæ–°ã—ã„é †</option>\r\n                                    <option value=\"number_asc\">ãŠå®¢æ§˜ç•ªå·é †</option>\r\n                                    <option value=\"name_asc\">äº”åéŸ³é †</option>\r\n                                </select>\r\n                            </div>\r\n                            <button\r\n                                onClick={async () => {\r\n                                    const name = window.prompt('æ–°ã—ã„ãŠå®¢æ§˜åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\r\n                                    if (name) {\r\n                                        setDeposits(prev => ({ ...prev, [name]: 0 }));\r\n                                        try {\r\n                                            await fetch(GAS_URL, {\r\n                                                method: 'POST',\r\n                                                headers: { 'Content-Type': 'text/plain' },\r\n                                                body: JSON.stringify({ action: 'addCustomer', customerName: name })\r\n                                            });\r\n                                        } catch (e) { console.error(e); }\r\n                                    }\r\n                                }}\r\n                                className=\"px-3 py-1.5 bg-gray-900 text-white rounded text-sm font-bold hover:bg-gray-800 transition-colors shadow-sm\">\r\n                                ï¼‹ æ–°è¦ã®ãŠå®¢æ§˜ã‚’è¿½åŠ \r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"overflow-x-auto relative p-6\">\r\n                        <table className=\"w-full text-sm text-left border rounded-lg overflow-hidden\">\r\n                            <thead className=\"bg-gray-50 text-gray-600 border-b\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 font-medium\">No.</th>\r\n                                    <th className=\"px-6 py-3 font-medium\">ãŠå®¢æ§˜å</th>\r\n                                    <th className=\"px-6 py-3 font-medium\">ç™»éŒ²æ—¥</th>\r\n                                    <th className=\"px-6 py-3 font-medium text-right\">ç´¯è¨ˆæ”¯æ‰•é¡</th>\r\n                                    <th className=\"px-6 py-3 font-medium text-right\">ç¾åœ¨ã®å‰æ‰•ã„æ®‹é«˜</th>\r\n                                    <th className=\"px-6 py-3 font-medium text-center\">æ“ä½œãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-100\">\r\n                                {customerList.length === 0 ? (\r\n                                    <tr>\r\n                                        <td colSpan={6} className=\"px-6 py-8 text-center text-gray-400\">\r\n                                            ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚å³ä¸‹ã®ã€Œæ–°è¦ã®ãŠå®¢æ§˜ã‚’è¿½åŠ ã€ã‹ã‚‰ãŠè©¦ã—ãã ã•ã„ã€‚\r\n                                        </td>\r\n                                    </tr>\r\n                                ) : (\r\n                                    customerList.map(({ name: customerName, balance, totalPaid, registeredDate, customerNumber }) => (\r\n                                        <tr key={customerName} className={`transition-colors ${balance > 0 ? 'bg-indigo-50/50' : 'hover:bg-gray-50/50'}`}>\r\n                                            <td className=\"px-6 py-4 text-center\">\r\n                                                <span className=\"text-gray-400 font-medium\">{customerNumber}</span>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <span className=\"font-bold text-gray-900\">{customerName}</span>\r\n                                                    {balance > 0 && <span className=\"text-[10px] bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold shadow-sm\">âœ¨ ãŠå¾—æ„æ§˜</span>}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <div className=\"text-gray-500 font-medium text-sm\">\r\n                                                    {new Date(registeredDate).toLocaleDateString('ja-JP')}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-right\">\r\n                                                <div className=\"text-gray-600 font-medium\">Â¥{totalPaid.toLocaleString()}</div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-right\">\r\n                                                <div className={`font-bold ${balance > 0 ? 'text-indigo-600' : 'text-gray-400'}`}>Â¥{balance.toLocaleString()}</div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <div className=\"flex flex-wrap items-center justify-center gap-2\">\r\n                                                    <button\r\n                                                        onClick={async () => {\r\n                                                            const input = window.prompt(`${customerName} æ§˜ã®è¿½åŠ å‰æ‰•ã„é¡ï¼ˆä¾‹: 5000ï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`);\r\n                                                            if (input && !isNaN(Number(input))) {\r\n                                                                const val = Number(input);\r\n                                                                const bonus = val >= 5000 ? Math.floor(val * 0.14) : 0;\r\n                                                                const total = val + bonus;\r\n                                                                const confirmed = window.confirm(`è¿½åŠ é¡: Â¥${val.toLocaleString()}\\nç‰¹å…¸(14%): Â¥${bonus.toLocaleString()}\\n\\nåˆè¨ˆ Â¥${total.toLocaleString()} ã‚’ãƒãƒ£ãƒ¼ã‚¸ã—ã¾ã™ã‹ï¼Ÿ`);\r\n                                                                if (confirmed) {\r\n                                                                    setDeposits(prev => ({\r\n                                                                        ...prev,\r\n                                                                        [customerName]: (prev[customerName] || 0) + total\r\n                                                                    }));\r\n                                                                    try {\r\n                                                                        await fetch(GAS_URL, {\r\n                                                                            method: 'POST',\r\n                                                                            headers: { 'Content-Type': 'text/plain' },\r\n                                                                            body: JSON.stringify({ action: 'updateDeposit', customerName, amount: total, type: 'charge' })\r\n                                                                        });\r\n                                                                    } catch (e) { console.error(e); }\r\n                                                                }\r\n                                                            }\r\n                                                        }}\r\n                                                        className=\"px-3 py-1.5 bg-indigo-50 text-indigo-600 border border-indigo-200 rounded text-xs font-bold hover:bg-indigo-100 transition-colors\">\r\n                                                        ğŸ’° ãƒãƒ£ãƒ¼ã‚¸è¿½åŠ \r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={async () => {\r\n                                                            const input = window.prompt(`${customerName} æ§˜ã®ã”åˆ©ç”¨é‡‘é¡ã‚’å·®ã—å¼•ãã¾ã™ã€‚é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ï¼ˆç¾åœ¨ã®æ®‹é«˜: Â¥${balance.toLocaleString()}ï¼‰`);\r\n                                                            if (input && !isNaN(Number(input))) {\r\n                                                                const val = Number(input);\r\n                                                                if (val > balance) {\r\n                                                                    alert('æ®‹é«˜ä¸è¶³ã§ã™ã€‚');\r\n                                                                    return;\r\n                                                                }\r\n                                                                const confirmed = window.confirm(`Â¥${val.toLocaleString()} ã‚’æ®‹é«˜ã‹ã‚‰å·®ã—å¼•ãã¾ã™ã‹ï¼Ÿ`);\r\n                                                                if (confirmed) {\r\n                                                                    setDeposits(prev => ({\r\n                                                                        ...prev,\r\n                                                                        [customerName]: prev[customerName] - val\r\n                                                                    }));\r\n                                                                    try {\r\n                                                                        await fetch(GAS_URL, {\r\n                                                                            method: 'POST',\r\n                                                                            headers: { 'Content-Type': 'text/plain' },\r\n                                                                            body: JSON.stringify({ action: 'updateDeposit', customerName, amount: -val, type: 'use' })\r\n                                                                        });\r\n                                                                    } catch (e) { console.error(e); }\r\n                                                                }\r\n                                                            }\r\n                                                        }}\r\n                                                        disabled={balance === 0}\r\n                                                        className={`px-3 py-1.5 rounded text-xs font-bold transition-colors border ${balance === 0\r\n                                                            ? 'bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed'\r\n                                                            : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\r\n                                                            }`}>\r\n                                                        â– åˆ©ç”¨åˆ†ã‚’å¼•ã\r\n                                                    </button>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </section>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n",
  "g:/ãƒã‚¤ãƒ‰ãƒ©ã‚¤ãƒ–/works/works2/é–‹ç™ºç³»/hanashitara/src/app/mypage/page.tsx": "'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport Link from 'next/link';\r\n\r\ninterface ReportData {\r\n    id: string;\r\n    date: string;\r\n    staff: string;\r\n    customerName: string;\r\n    totalSales: number;\r\n    staffShare: number;\r\n    isPaid: boolean;\r\n}\r\n\r\nexport default function StaffMyPage() {\r\n    const [staffName, setStaffName] = useState('');\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n    const [reports, setReports] = useState<ReportData[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [errorText, setErrorText] = useState('');\r\n\r\n    const printRef = useRef<HTMLDivElement>(null);\r\n    const GAS_URL = 'https://script.google.com/macros/s/AKfycbzopMne7Ga8ZruWAf3xvAP7WQFvQ-Uau09qsmG2K6-Mcs7xfrXXl1Ev4GmLHpOcgTwj/exec';\r\n\r\n    // ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ï¼ˆåå‰ã‚’å…¥åŠ›ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼‰\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!staffName) return;\r\n\r\n        setIsLoading(true);\r\n        setErrorText('');\r\n\r\n        try {\r\n            const res = await fetch(`${GAS_URL}?action=getReports`);\r\n            const json = await res.json();\r\n\r\n            if (json.success) {\r\n                // è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã ã‘ã‚’æŠ½å‡º\r\n                const myData = json.data\r\n                    .filter((row: any[]) => row[2] === staffName)\r\n                    .map((row: any[]) => ({\r\n                        id: row[0],\r\n                        date: row[1],\r\n                        staff: row[2],\r\n                        customerName: row[4],\r\n                        totalSales: Number(row[6]) || 0,\r\n                        staffShare: Number(row[7]) || 0,\r\n                        isPaid: row[8] === 'å…¥é‡‘æ¸ˆ' || row[8] === true || row[8] === 'TRUE',\r\n                    }))\r\n                    .sort((a: any, b: any) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n\r\n                setReports(myData);\r\n                setIsLoggedIn(true);\r\n            } else {\r\n                setErrorText('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n            setErrorText('é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ã”ç¢ºèªãã ã•ã„ã€‚');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // å°åˆ·ï¼ˆPDFç”Ÿæˆï¼‰å‡¦ç†\r\n    const handlePrint = () => {\r\n        window.print();\r\n    };\r\n\r\n    // ä»Šæœˆã®è¨ˆç®—ï¼ˆâ€»æœ¬æ¥ã¯æœˆã§çµã‚Šè¾¼ã¿ã¾ã™ãŒã€ä»Šå›ã¯å…¨ä»¶ã®åˆè¨ˆã¨ã—ã¦è¡¨ç¤ºï¼‰\r\n    const totalMyShare = reports.reduce((sum, r) => sum + r.staffShare, 0);\r\n\r\n    // --- ãƒ­ã‚°ã‚¤ãƒ³å‰ç”»é¢ ---\r\n    if (!isLoggedIn) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gray-50/50 flex flex-col items-center pt-20 px-4\">\r\n                <div className=\"w-full max-w-md bg-white p-8 rounded-2xl shadow-sm border border-gray-100\">\r\n                    <h1 className=\"text-2xl font-bold text-gray-900 text-center mb-6\">çµ¦ä¸ãƒ»æ˜ç´°ã®ç¢ºèª</h1>\r\n                    <form onSubmit={handleLogin} className=\"space-y-4\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">ã‚¹ã‚¿ãƒƒãƒ•åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                required\r\n                                value={staffName}\r\n                                onChange={(e) => setStaffName(e.target.value)}\r\n                                placeholder=\"ä¾‹: ãƒ†ã‚¹ãƒˆã‚¹ã‚¿ãƒƒãƒ•æ§˜\"\r\n                                className=\"w-full bg-gray-50 border border-gray-200 text-gray-900 rounded-xl px-4 py-3 focus:ring-2 focus:ring-[#007AFF] focus:border-transparent outline-none transition-all\"\r\n                            />\r\n                        </div>\r\n                        {errorText && <p className=\"text-red-500 text-sm\">{errorText}</p>}\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isLoading}\r\n                            className=\"w-full bg-[#007AFF] hover:bg-[#007AFF]/90 text-white font-medium py-3 rounded-xl transition-all shadow-sm flex justify-center items-center\"\r\n                        >\r\n                            {isLoading ? 'ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªä¸­...' : 'ãƒã‚¤ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹'}\r\n                        </button>\r\n                    </form>\r\n                    <div className=\"mt-6 text-center\">\r\n                        <Link href=\"/\" className=\"text-sm text-gray-500 hover:text-gray-800 underline\">\r\n                            æ¥­å‹™å ±å‘Šãƒ•ã‚©ãƒ¼ãƒ ã¸æˆ»ã‚‹\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // --- ãƒ­ã‚°ã‚¤ãƒ³å¾Œï¼ˆãƒã‚¤ãƒšãƒ¼ã‚¸ï¼†æ˜ç´°æ›¸ï¼‰ ---\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50/50 pt-10 pb-20 px-4 print:bg-white print:pt-0 print:pb-0\">\r\n            <div className=\"max-w-3xl mx-auto space-y-6\">\r\n\r\n                {/* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ï¼ˆå°åˆ·æ™‚ã¯å®Œå…¨ã«éš ã™ï¼‰ */}\r\n                <div className=\"flex justify-between items-center print:hidden\">\r\n                    <Link href=\"/\" className=\"text-sm text-[#007AFF] font-medium hover:underline\">\r\n                        â† å ±å‘Šãƒ•ã‚©ãƒ¼ãƒ ã«æˆ»ã‚‹\r\n                    </Link>\r\n                    <button\r\n                        onClick={handlePrint}\r\n                        className=\"bg-gray-900 text-white px-5 py-2 rounded-full text-sm font-medium shadow-sm hover:bg-gray-800 transition-colors\"\r\n                    >\r\n                        ğŸ–¨ï¸ æ˜ç´°ã‚’PDFã§ä¿å­˜ãƒ»å°åˆ·\r\n                    </button>\r\n                </div>\r\n\r\n                {/* --- ã“ã“ã‹ã‚‰ä¸‹ãŒã€Œæ˜ç´°æ›¸ã€ã¨ã—ã¦å°åˆ·ï¼ˆPDFåŒ–ï¼‰ã•ã‚Œã‚‹ã‚¨ãƒªã‚¢ --- */}\r\n                <div ref={printRef} className=\"bg-white p-8 sm:p-12 rounded-2xl shadow-sm border border-gray-100 print:shadow-none print:border-none print:p-0\">\r\n\r\n                    <div className=\"flex justify-between items-start border-b pb-6 mb-8\">\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-extrabold text-gray-900 tracking-tight\">çµ¦ä¸æ”¯æ‰•æ˜ç´°æ›¸</h1>\r\n                            <p className=\"text-gray-500 mt-2\">ãƒãƒŠã‚·ã‚¿ãƒ©.com</p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                            <p className=\"text-sm text-gray-500\">ç™ºè¡Œæ—¥: {new Date().toLocaleDateString('ja-JP')}</p>\r\n                            <p className=\"text-xl font-bold text-gray-900 mt-1\">{staffName} <span className=\"text-sm font-normal text-gray-600\">æ§˜</span></p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-gray-50 rounded-xl p-6 mb-8 flex justify-between items-center print:border print:border-gray-200 print:bg-transparent\">\r\n                        <span className=\"text-lg font-medium text-gray-700\">åˆè¨ˆæ”¯çµ¦é¡ï¼ˆã‚¹ã‚¿ãƒƒãƒ•å ±é…¬ï¼‰</span>\r\n                        <span className=\"text-3xl font-bold text-gray-900\">Â¥{totalMyShare.toLocaleString()}</span>\r\n                    </div>\r\n\r\n                    <h2 className=\"text-sm font-bold text-gray-500 mb-4 px-1\">ä»Šæœˆã®æ¥­å‹™å±¥æ­´ãƒ»æ˜ç´°</h2>\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full text-sm text-left border-collapse\">\r\n                            <thead>\r\n                                <tr className=\"border-b-2 border-gray-800 text-gray-900\">\r\n                                    <th className=\"py-3 px-2 font-semibold\">æ—¥ä»˜</th>\r\n                                    <th className=\"py-3 px-2 font-semibold\">ãŠå®¢æ§˜å</th>\r\n                                    <th className=\"py-3 px-2 font-semibold text-right\">ç·å£²ä¸Š</th>\r\n                                    <th className=\"py-3 px-2 font-semibold text-right text-[#007AFF]\">ã‚ãªãŸã®å ±é…¬é¡</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-100\">\r\n                                {reports.length === 0 ? (\r\n                                    <tr>\r\n                                        <td colSpan={4} className=\"py-8 text-center text-gray-400\">å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</td>\r\n                                    </tr>\r\n                                ) : (\r\n                                    reports.map((r, i) => (\r\n                                        <tr key={i} className=\"text-gray-700 print:text-black\">\r\n                                            <td className=\"py-4 px-2\">{new Date(r.date).toLocaleDateString('ja-JP')}</td>\r\n                                            <td className=\"py-4 px-2\">{r.customerName}</td>\r\n                                            <td className=\"py-4 px-2 text-right\">Â¥{r.totalSales.toLocaleString()}</td>\r\n                                            <td className=\"py-4 px-2 text-right font-bold text-gray-900\">Â¥{r.staffShare.toLocaleString()}</td>\r\n                                        </tr>\r\n                                    ))\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <div className=\"mt-16 pt-8 border-t border-gray-100 text-center text-xs text-gray-400\">\r\n                        <p>â€»æœ¬æ˜ç´°æ›¸ã¯ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦è‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p>\r\n                        <p className=\"mt-1\">ãƒãƒŠã‚·ã‚¿ãƒ©.com ã‚µãƒãƒ¼ãƒˆã‚»ãƒ³ã‚¿ãƒ¼</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"
}